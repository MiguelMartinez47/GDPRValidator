<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="MobileOptimized" content="width" />
    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet">

    <title>GDPRValidator</title>


    <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/checkout/">
    <link href="styles/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/bs-stepper.min.css">

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        .b-example-divider {
            height: 3rem;
            background-color: rgba(0, 0, 0, .1);
            border: solid rgba(0, 0, 0, .15);
            border-width: 1px 0;
            box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
        }

        .b-example-vr {
            flex-shrink: 0;
            width: 1.5rem;
            height: 100vh;
        }

        .bi {
            vertical-align: -.125em;
            fill: currentColor;
        }

        .nav-scroller {
            position: relative;
            z-index: 2;
            height: 2.75rem;
            overflow-y: hidden;
        }

        .nav-scroller .nav {
            display: flex;
            flex-wrap: nowrap;
            padding-bottom: 1rem;
            margin-top: -1px;
            overflow-x: auto;
            text-align: center;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }
    </style>


    <!-- Custom styles for this template -->
    <link href="styles/form-validation.css" rel="stylesheet">
</head>

<body>

    <div class="cover-container d-flex p-3 flex-column">
        <header class="mb-auto">
            <div>
                <h3 class="float-md-start mb-0">GDPRValidator</h3>
                <nav class="nav nav-masthead justify-content-center float-md-end">
                    <a class="nav-link fw-bold py-1 px-0" href="index.html">Home</a>
                    <a class="nav-link fw-bold py-1 px-0 active" aria-current="page"
                        href="companyDataForm2.html">Tool</a>
                    <a class="nav-link fw-bold py-1 px-0" href="main.html">About</a>
                </nav>
            </div>
        </header>
    </div>

    <div id="stepper1" class="bs-stepper linear">
        <div class="bs-stepper-header" role="tablist">
            <div class="step" data-target="#test-l-1">
                <button type="button" class="step-trigger" role="tab" id="stepper1trigger1" aria-controls="test-l-1"
                    aria-selected="false" disabled="disabled">
                    <span class="bs-stepper-circle">1</span>
                    <span class="bs-stepper-label">Company Details</span>
                </button>
            </div>
            <div class="bs-stepper-line"></div>
            <div class="step" data-target="#test-l-2">
                <button type="button" class="step-trigger" role="tab" id="stepper1trigger2" aria-controls="test-l-2"
                    aria-selected="false" disabled="disabled">
                    <span class="bs-stepper-circle">2</span>
                    <span class="bs-stepper-label">Risk Level Evaluation</span>
                </button>
            </div>
            <div class="bs-stepper-line"></div>
            <div class="step" data-target="#test-l-3">
                <button type="button" class="step-trigger" role="tab" id="stepper1trigger3" aria-controls="test-l-3"
                    aria-selected="false" disabled="disabled">
                    <span class="bs-stepper-circle">3</span>
                    <span class="bs-stepper-label">GDPR Checklist</span>
                </button>
            </div>
            <div class="bs-stepper-line"></div>
            <div class="step" data-target="#test-l-3">
                <button type="button" class="step-trigger" role="tab" id="stepper1trigger3" aria-controls="test-l-3"
                    aria-selected="false" disabled="disabled">
                    <span class="bs-stepper-circle">4</span>
                    <span class="bs-stepper-label">Cloud Privacy Requirements</span>
                </button>
            </div>
            <div class="bs-stepper-line"></div>
            <div class="step active" data-target="#test-l-3">
                <button type="button" class="step-trigger" role="tab" id="stepper1trigger3" aria-controls="test-l-3"
                    aria-selected="true">
                    <span class="bs-stepper-circle">5</span>
                    <span class="bs-stepper-label">Third-Parties Details</span>
                </button>
            </div>
            <div class="bs-stepper-line"></div>
            <div class="step" data-target="#test-l-3">
                <button type="button" class="step-trigger" role="tab" id="stepper1trigger3" aria-controls="test-l-3"
                    aria-selected="false" disabled="disabled">
                    <span class="bs-stepper-circle">6</span>
                    <span class="bs-stepper-label">Additiona Recommendations</span>
                </button>
            </div>
        </div>
    </div>

    <div class="b-example-divider"></div>


    <div class="container">
        <main>
            <div class="container p-3">
                <form>
                    <div class="card mb-auto">
                        <div class="card-header"><b>Does your company hire third-party services such as website
                                maintenance, email or web hosting, software development, cleaning services or
                                others?</b></div>
                        <div class="card-body">
                            <div class="row">
                                <div class="form-check col-md-3">
                                    <input class="form-check-input" data-bs-toggle="collapse" href="#dataTPs"
                                        aria-expanded="false" aria-controls="dataTPs" type="radio"
                                        name="flexRadioDefault" id="yesTPs" onclick="testRequired()">
                                    <label class="form-check-label" for="yesTPs">
                                        Yes
                                    </label>
                                </div>
                                <div class="form-check col-md-3">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault" id="noTPs">
                                    <label class="form-check-label" for="noTPs">
                                        No
                                    </label>
                                </div>
                            </div>

                        </div>
                    </div>
                </form>
            </div>

            <div class="container p-4">
                <div class="collapse" id="dataTPs">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">Third-Party data</h5>
                        </div>
                        <div class="card-body">
                            <form class="needs-validation" novalidate id="firstTPInfo">
                                <div class="row g-3">
                                    <div class="col-12">
                                        <label for="firstTPName" class="form-label">Third-Party name</label>
                                        <div class="input-group has-validation">
                                            <input type="text" class="form-control" id="firstTPName" value="" required>
                                            <div class="invalid-feedback">
                                                The company's name is required.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label for="firstTPTIN" class="form-label">T.I.N. Tax Identification
                                            Number</label>
                                        <input type="text" class="form-control" id="firstTPTIN" value="" required>
                                        <div class="invalid-feedback">
                                            A valid T.I.N. is required.
                                        </div>
                                    </div>

                                    <div class="col-12">
                                        <label for="firstTPAddress" class="form-label">Address</label>
                                        <input type="text" class="form-control" id="firstTPAddress" value="" required>
                                        <div class="invalid-feedback">
                                            Please enter the company's address.
                                        </div>
                                    </div>

                                    <div class="col-12">
                                        <label for="firstTPDesc" class="form-label">Service provided
                                            description</label>
                                        <textarea class="form-control" aria-label="With textarea" id="firstTPDesc"
                                            value="" required></textarea>
                                        <div class="invalid-feedback">
                                            Please enter a description of the company's service.
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="container p-4"></div>

                    <div class="card">
                        <div class="card-header">
                            <h5 class="card-title">Third-Party data</h5>
                        </div>
                        <div class="card-body">
                            <form class="needs-validation" novalidate id="secondTPInfo">
                                <div class="row g-3">
                                    <div class="col-12">
                                        <label for="secondTPName" class="form-label">Third-Party name</label>
                                        <div class="input-group has-validation">
                                            <input type="text" class="form-control" id="secondTPName" value="" required>
                                            <div class="invalid-feedback">
                                                The company's name is required.
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label for="secondTPTIN" class="form-label">T.I.N. Tax Identification
                                            Number</label>
                                        <input type="text" class="form-control" id="secondTPTIN" value="" required>
                                        <div class="invalid-feedback">
                                            A valid T.I.N. is required.
                                        </div>
                                    </div>

                                    <div class="col-12">
                                        <label for="secondTPAddress" class="form-label">Address</label>
                                        <input type="text" class="form-control" id="secondTPAddress" placeholder=""
                                            value="" required>
                                        <div class="invalid-feedback">
                                            Please enter the company's address.
                                        </div>
                                    </div>

                                    <div class="col-12">
                                        <label for="secondTPDesc" class="form-label">Service provided
                                            description</label>
                                        <textarea class="form-control" aria-label="With textarea" id="secondTPDesc"
                                            value="" required></textarea>
                                        <div class="invalid-feedback">
                                            Please enter a description of the company's service.
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="container p-4 center">
                        <p>
                            <b>
                                In case your company uses services from more than two third parties that require sharing
                                personal data, they must also be included in the final documentation draft. You must
                                include the same information fields as required in the previous forms, therefore you may
                                use them as a template.
                            </b>
                        </p>
                    </div>
                    <div class="container p-3">
                        <div class="d-grid col-2 mx-auto">
                            <input id="continue" class="btn btn-primary" type="submit" value="Continue">
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="./src/bootstrap.bundle.min.js"></script>

    <script src="./src/form-validation.js"></script>

    <script type="text/javascript">

        function testRequired() {
            if (document.getElementById('yesTPs').checked) {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                const forms = document.querySelectorAll('.needs-validation')

                // Loop over them and prevent submission
                Array.from(forms).forEach(form => {
                    form.addEventListener('submit', event => {
                        if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                        }

                        form.classList.add('was-validated')
                    }, false)
                })
            }
        }

        var contBtn = document.getElementById('continue');

        contBtn.onclick = function () {

            if (document.getElementById('yesTPs').checked) {
                let promise = new Promise((resolve, reject) => {
                    var firstTP = new Array();
                    var secondTP = new Array();


                    Array.from(document.getElementById('firstTPInfo').elements).forEach(form => {
                        firstTP.push(form.value);
                    });

                    Array.from(document.getElementById('secondTPInfo').elements).forEach(form => {
                        secondTP.push(form.value);
                    });

                    if (firstTP.length == 4)
                        localStorage.setItem('firstTPData', JSON.stringify(firstTP));
                    localStorage.setItem('firstTP', "true");
                    if (secondTP.length == 4)
                        localStorage.setItem('secondTPData', JSON.stringify(secondTP));
                    localStorage.setItem('secondTP', "true");

                    resolve(true);
                })

                promise.then((successMessage) => {
                    window.location.assign('./mainProcFinal.html');
                });
            } else
                window.location.assign('./mainProcFinal.html');
        }
    </script>


    <script type="text/javascript">
        var noCheck = document.getElementById('noTPs');

        noCheck.onclick = function () {
            window.location.assign('./mainProcFinal.html');
        }
    </script>


</body>

</html>