<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="MobileOptimized" content="width" />
  <meta name="HandheldFriendly" content="true" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet">


  <title>GDPRValidator</title>

  <script src="https://unpkg.com/docx@7.1.0/build/index.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"></script>


  <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/checkout/">
  <link href="styles/bootstrap.min.css" rel="stylesheet">

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }

    .b-example-divider {
      height: 3rem;
      background-color: rgba(0, 0, 0, .1);
      border: solid rgba(0, 0, 0, .15);
      border-width: 1px 0;
      box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
    }

    .b-example-vr {
      flex-shrink: 0;
      width: 1.5rem;
      height: 100vh;
    }

    .bi {
      vertical-align: -.125em;
      fill: currentColor;
    }

    .nav-scroller {
      position: relative;
      z-index: 2;
      height: 2.75rem;
      overflow-y: hidden;
    }

    .nav-scroller .nav {
      display: flex;
      flex-wrap: nowrap;
      padding-bottom: 1rem;
      margin-top: -1px;
      overflow-x: auto;
      text-align: center;
      white-space: nowrap;
      -webkit-overflow-scrolling: touch;
    }
  </style>


  <!-- Custom styles for this template -->
  <link href="styles/form-validation.css" rel="stylesheet">
</head>

<body class="bg-light">

  <div class="cover-container d-flex p-3 flex-column">
    <header class="mb-auto">
      <div>
        <h3 class="float-md-start mb-0">GDPRValidator</h3>
        <nav class="nav nav-masthead justify-content-center float-md-end">
          <a class="nav-link fw-bold py-1 px-0" href="index.html">Home</a>
          <a class="nav-link fw-bold py-1 px-0 active" aria-current="page" href="main.html">Tool</a>
          <a class="nav-link fw-bold py-1 px-0" href="checklists.html">Checklist</a>
        </nav>
      </div>
    </header>
  </div>

  <div class="b-example-divider"></div>

  <div class="container">
    <main>
      <div class="py-5 text-center">
        <p class="lead">
          The data that you enter in the program from this screen until the end of the program will be used to draft the
          document that is generated automatically and adapted to your organization.
        </p>
      </div>

      <div class="row g-5">
        <h4 class="mb-3">Fill in company data</h4>


        <form class="needs-validation" novalidate id="mainForm">
          <div class="row g-3">
            <div class="col-sm-6">
              <label for="companyTIN" class="form-label">T.I.N. Tax Identification Number</label>
              <input type="text" class="form-control" id="companyTIN" placeholder="" value="" required>
              <div class="invalid-feedback">
                A valid T.I.N. is required.
              </div>
            </div>

            <div class="col-sm-6">
              <label for="companyTlf" class="form-label">Telephone Number</label>
              <input type="text" class="form-control" id="companyTlf" placeholder="" value="" required>
              <div class="invalid-feedback">
                Valid phone is required.
              </div>
            </div>

            <div class="col-12">
              <label for="companyName" class="form-label">Company Name</label>
              <div class="input-group has-validation">
                <!-- <span class="input-group-text">@</span> -->
                <input type="text" class="form-control" id="companyName" placeholder="Company's name goes here"
                  required>
                <div class="invalid-feedback">
                  Your compnay's name is required.
                </div>
              </div>
            </div>

            <div class="col-12">
              <label for="email" class="form-label">Contact Email </label>
              <input type="email" class="form-control" id="infoEmail" placeholder="info@yourcompany.com" required>
              <div class="invalid-feedback">
                Please enter a valid email address.
              </div>
            </div>

            <div class="col-12">
              <label for="email" class="form-label">Email for the exercise of data subject rights </label>
              <input type="email" class="form-control" id="rightsEmail" placeholder="subjectrights.gdpr@yourcompany.com"
                required>
              <div class="invalid-feedback">
                Please enter a valid email address for the exercise of data subject rights.
              </div>
            </div>

            <div class="col-12">
              <label for="address" class="form-label">Address</label>
              <input type="text" class="form-control" id="address" placeholder="1234 Main St" required>
              <div class="invalid-feedback">
                Please enter your company's address.
              </div>
            </div>

            <div class="col-12">
              <label for="address2" class="form-label">Address 2 <span class="text-muted">(Optional)</span></label>
              <input type="text" class="form-control" id="address2" placeholder="Office or dept floor">
            </div>

            <div class="col-12">
              <label for="activityDesc" class="form-label">Company's Activity Description</label>
              <textarea id="activityDesc" class="form-control" aria-label="With textarea" required></textarea>
              <div class="invalid-feedback">
                Please enter a description of your companyâ€™s data processing activities.
              </div>
            </div>

            <div class="col-md-3">
              <label for="country" class="form-label">Country</label>
              <input type="text" class="form-control" id="country" placeholder="" required>
              <div class="invalid-feedback">
                Company's country required.
              </div>
            </div>
            <div class="col-md-3">
              <label for="state" class="form-label">State</label>
              <input type="text" class="form-control" id="state" placeholder="" required>
              <div class="invalid-feedback">
                Company's state required.
              </div>
            </div>

            <div class="col-md-3">
              <label for="zip" class="form-label">Zip</label>
              <input type="text" class="form-control" id="zip" placeholder="" required>
              <div class="invalid-feedback">
                Zip code required.
              </div>
            </div>
        </form>

        <form id="check">
          <div class="wrapper d-flex justify-content-center flex-column px-md-5 px-1">
            <label class="mt-md-0 mt-2">Data Protection Officer</label>
            <div class="d-lg-flex justify-content-between align-items-center pb-4">
              <div class="form-check" data-bs-toggle="collapse" href="#dpoForm" aria-expanded="false"
                aria-controls="dpoForm">
                <input type="checkbox" class="form-check-input" id="hasdpo" onclick="dpoData()">
                <label class="form-check-label" for="same-address">The company has designated a DPO</label>
              </div>
            </div>
          </div>
        </form>

        <form class="needs-validation collapse" novalidate id="dpoForm">
          <div class="row g-5">
            <h4 class="mb-3">Fill in DPO data</h4>
            <div class="row g-3">
              <div class="col-sm-6">
                <label for="dpoName" class="form-label">Full Name</label>
                <input type="text" class="form-control" id="dpoName" placeholder="" value="">
                <div class="invalid-feedback">
                  A valid Name is required.
                </div>
              </div>

              <div class="col-sm-6">
                <label for="dpoTlf" class="form-label">Telephone Number</label>
                <input type="text" class="form-control" id="dpoTlf" placeholder="" value="">
                <div class="invalid-feedback">
                  Valid phone is required.
                </div>
              </div>

              <div class="col-12">
                <label for="email" class="form-label">Contact Email </label>
                <input type="email" class="form-control" id="dpoemail" placeholder="dpo@info.com">
                <div class="invalid-feedback">
                  Please enter a valid email address.
                </div>
              </div>
            </div>
          </div>
        </form>
        <button class="w-100 btn btn-primary btn-lg" id="continueBtn" type="submit"
          onclick="retreivevalues()">Continue</button>
      </div>
    </main>

  </div>

  <script type="text/javascript">
    function dpoData() {
      var check = document.getElementById('hasdpo');
      var name = document.getElementById('dpoName');
      var tlf = document.getElementById('dpoTlf');
      var mail = document.getElementById('dpoemail')

      if (check.checked) {
        name.required = true;
        tlf.required = true;
        mail.required = true;
      } else {
        name.required = false;
        tlf.required = false;
        mail.required = false;
      }
    }
  </script>


  <script src="../src/bootstrap.bundle.min.js"></script>

  <!-- <script src="../src/form-validation.js"></script> -->

  <script type="text/javascript">
    function retreivevalues() {
      try {
        console.log("Empieza");
        let promise = new Promise((resolve, reject) => {
          console.log("Empieza  PROMESA");
          var check = document.getElementById('hasdpo');
          var values = new Array();
          var dpo = new Array();


          Array.from(document.getElementById("mainForm").elements).forEach(form => {
            values.push(form.value);
          });

          if (check.checked) {
            Array.from(document.getElementById("dpoForm").elements).forEach(form => {
              dpo.push(form.value);
            });
          }

          localStorage.setItem('companyData', JSON.stringify(values));
          localStorage.setItem('dpoData', JSON.stringify(dpo));
          resolve(true);
        })

        promise.then((successMessage) => {
          console.log("Empieza cambio");
          window.location.assign('./checkbox.html');
        });
      } catch( ex ){
        alert(ex);
      } 
    }
  </script>
</body>

</html>