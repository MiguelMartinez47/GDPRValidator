<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="MobileOptimized" content="width" />
    <meta name="HandheldFriendly" content="true" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300&display=swap" rel="stylesheet">

    <title>GDPRValidator</title>


    <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/checkout/">
    <link href="styles/bootstrap.min.css" rel="stylesheet">

    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }

        .b-example-divider {
            height: 3rem;
            background-color: rgba(0, 0, 0, .1);
            border: solid rgba(0, 0, 0, .15);
            border-width: 1px 0;
            box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
        }

        .b-example-vr {
            flex-shrink: 0;
            width: 1.5rem;
            height: 100vh;
        }

        .bi {
            vertical-align: -.125em;
            fill: currentColor;
        }

        .nav-scroller {
            position: relative;
            z-index: 2;
            height: 2.75rem;
            overflow-y: hidden;
        }

        .nav-scroller .nav {
            display: flex;
            flex-wrap: nowrap;
            padding-bottom: 1rem;
            margin-top: -1px;
            overflow-x: auto;
            text-align: center;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }
    </style>


    <!-- Custom styles for this template -->
    <link href="styles/form-validation.css" rel="stylesheet">
</head>

<body>

    <div class="cover-container d-flex p-3 flex-column">
        <header class="mb-auto">
            <div>
                <h3 class="float-md-start mb-0">GDPRValidator</h3>
                <nav class="nav nav-masthead justify-content-center float-md-end">
                    <a class="nav-link fw-bold py-1 px-0" href="index.html">Home</a>
                    <a class="nav-link fw-bold py-1 px-0 active" aria-current="page" href="main.html">Tool</a>
                    <a class="nav-link fw-bold py-1 px-0" href="checklists.html">Checklist</a>
                </nav>
            </div>
        </header>
    </div>

    <div class="b-example-divider"></div>

    <div class="container">
        <main>
            <div class="container p-3">
                <form class="needs-validation" novalidate>
                    <div class="card mb-auto">
                        <div class="card-header"><b>Does your company process personal data employees?</b></div>
                        <div class="card-body">
                            <div class="row">
                                <div class="form-check col-md-3">
                                    <input class="form-check-input" data-bs-toggle="collapse"
                                        href="#employDataProcessed" aria-expanded="false"
                                        aria-controls="employDataProcessed" type="radio" name="flexRadioDefault"
                                        id="yesEmployInfo">
                                    <label class="form-check-label" for="yesEmployInfo">
                                        Yes
                                    </label>
                                </div>
                                <div class="form-check col-md-3">
                                    <input class="form-check-input" type="radio" name="flexRadioDefault"
                                        id="noEmployInfo">
                                    <label class="form-check-label" for="noEmployInfo">
                                        No
                                    </label>
                                </div>
                            </div>

                        </div>
                    </div>

                </form>
            </div>

            <div class="container">
                <div class="collapse row" id="employDataProcessed">
                    <div class="col-8">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title">Mark the categories of personal from employees that are processed
                                </h5>
                            </div>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">

                                    <label class="form-check-label" for="employeeDataCat_1" id="categLabel_1">
                                        <input class="form-check-input" type="checkbox" value=""
                                            id="employeeDataCat_1" />
                                        Identification of a natural person (name, surname, social security number,
                                        email,
                                        postal address, telephone number, other ID numbers)</label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input" type="checkbox" value="" id="employeeDataCat_2" />
                                    <label class="form-check-label" for="employeeDataCat_2" id="categLabel_2">Personal
                                        characteristics (age, sex, nationality, marital status)</label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input" type="checkbox" value="" id="employeeDataCat_3" />
                                    <label class="form-check-label" for="employeeDataCat_3" id="categLabel_3">Data
                                        regarding
                                        academic results</label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input" type="checkbox" value="" id="employeeDataCat_4" />
                                    <label class="form-check-label" for="employeeDataCat_4" id="categLabel_4">Data
                                        regarding
                                        professional history</label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input" type="checkbox" value="" id="employeeDataCat_5" />
                                    <label class="form-check-label" for="employeeDataCat_5" id="categLabel_5">Bank
                                        account
                                        details</label>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="col-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title">Mark the purposes for the processing</h5>
                            </div>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <input class="form-check-input" type="checkbox" value="" id="dataPurp_1" />
                                    <label class="form-check-label" for="dataPurp_1" id="purpLabel_1">Managing
                                        payment</label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input" type="checkbox" value="" id="dataPurp_2" />
                                    <label class="form-check-label" for="dataPurp_2" id="purpLabel_2">Employee
                                        training</label>
                                </li>
                                <li class="list-group-item">

                                    <label class="form-check-label" for="dataPurp_3" id="purpLabel_3">
                                        <input class="form-check-input" type="checkbox" value="" id="dataPurp_3" />
                                        Managing professional relation with the company</label>
                                </li>
                                <li class="list-group-item">
                                    <input class="form-check-input" type="checkbox" value="" id="dataPurp_4" />
                                    <label class="form-check-label" for="dataPurp_4" id="purpLabel_4">Post-sales
                                        service</label>
                                </li>
                            </ul>
                        </div>
                    </div>


                    <div class="container p-3">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="card-title">Mark the source where you get your employees' data from</h5>
                            </div>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <label class="form-check-label" for="potentialSource_1" id="sourceLabel_1">
                                        <input class="form-check-input" type="checkbox" id="potentialSource_1">It is
                                        provided by themselves
                                    </label>
                                </li>
                                <li class="list-group-item">
                                    <label class="form-check-label" for="potentialSource_2" id="sourceLabel_2">
                                        <input class="form-check-input" type="checkbox" id="potentialSource_2">It is
                                        obtained from an employment agency which the employees previously
                                        provided their data to
                                    </label>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="container p-3">
                        <form class="needs-validation" novalidate>
                            <div class="card mb-auto">
                                <div class="card-header"><b>Is the payment management carried out by an external
                                        administration?</b></div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="form-check col-md-3">
                                            <input class="form-check-input" data-bs-toggle="collapse"
                                                href="#adminAgencyData" aria-expanded="false"
                                                aria-controls="adminAgencyData" type="radio" name="flexRadioDefault"
                                                id="yesExtAdmin" onclick="adminAgenChecked()">
                                            <label class="form-check-label" for="yesExtAdmin">
                                                Yes
                                            </label>
                                        </div>
                                        <div class="form-check col-md-3">
                                            <input class="form-check-input" type="radio" name="flexRadioDefault"
                                                id="noExtAdmin">
                                            <label class="form-check-label" for="noExtAdmin">
                                                No
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </form>
                    </div>
                    <div class="container p-4">
                        <div class="collapse" id="adminAgencyData">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title">Administrative Agency</h5>
                                </div>
                                <div class="card-body">
                                    <form class="needs-validation" novalidate id="dataAdminAgency">
                                        <div class="row g-3">
                                            <div class="col-12">
                                                <label for="agencyName" class="form-label">Administrative agency
                                                    name</label>
                                                <div class="input-group has-validation">
                                                    <input type="text" class="form-control" id="agencyName">
                                                    <div class="invalid-feedback">
                                                        The administrative agency's name is required.
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-12">
                                                <label for="agencyTIN" class="form-label">T.I.N. Tax Identification
                                                    Number</label>
                                                <input type="text" class="form-control" id="agencyTIN">
                                                <div class="invalid-feedback">
                                                    A valid T.I.N. is required.
                                                </div>
                                            </div>

                                            <div class="col-12">
                                                <label for="agencyAddress" class="form-label">Address</label>
                                                <input type="text" class="form-control" id="agencyAddress">
                                                <div class="invalid-feedback">
                                                    Please enter the administrative agency's address.
                                                </div>
                                            </div>

                                            <div class="col-12">
                                                <label for="agencyDesc" class="form-label">Service provided
                                                    description</label>
                                                <textarea class="form-control" aria-label="With textarea"
                                                    id="agencyDesc"></textarea>
                                                <div class="invalid-feedback">
                                                    Please enter a description of the administrative agency's service.
                                                </div>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="container p-3">
                        <div class="d-grid col-2 mx-auto">
                            <input id="continue" class="btn btn-primary" type="button" value="Continue">
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../src/bootstrap.bundle.min.js"></script>

    <script src="../src/form-validation.js"></script>

    <script type="text/javascript">
        var noCheck = document.getElementById('noEmployInfo');

        noCheck.onclick = function () {
            localStorage.setItem('employData', "false");
            window.location.assign('otherTPsInfo.html');
        }
    </script>

    <script type="text/javascript">
        var contBtn = document.getElementById('continue');

        contBtn.onclick = function () {
            let promise = new Promise((resolve, reject) => {
                //Get processing categories checks and labels in arrays to store checked ones
                var catChecks = document.querySelectorAll('[id^=employeeDataCat_]');
                var catLabels = document.querySelectorAll('[id^=categLabel_]');
                //Same for purposes
                var purpChecks = document.querySelectorAll('[id^=dataPurp_]');
                var purpLabels = document.querySelectorAll('[id^=purpLabel_]');
                //Source
                var sourceChecks = document.querySelectorAll('[id^=potentialSource_]');
                var sourceLabels = document.querySelectorAll('[id^=sourceLabel_]');
                //Others
                var adminAgenCheck = document.getElementById('yesExtAdmin');

                var categories = new Array();
                var purposes = new Array();
                var sources = new Array();
                var adminAgenData = new Array();

                //Add categories
                for (let i = 0; i < catChecks.length; i++) {
                    if (catChecks[i].checked) {
                        categories.push(catLabels[i].innerText);
                    }
                };
                //Add purposes
                for (let i = 0; i < purpChecks.length; i++) {
                    if (purpChecks[i].checked) {
                        purposes.push(purpLabels[i].innerText);
                    }
                };
                //Add legal recipients, skip last because the value comes from text field not from label
                for (let i = 0; i < sourceChecks.length; i++) {
                    if (sourceChecks[i].checked) {
                        sources.push(sourceLabels[i].innerText);
                    }
                };
                //last get values from 'others' forms if they are checked
                if (adminAgenCheck.checked) {
                    localStorage.setItem('employAdmin', "true")
                    Array.from(document.getElementById("dataAdminAgency").elements).forEach(form => {
                        adminAgenData.push(form.value);
                    });
                    if (adminAgenData.length > 0)
                        localStorage.setItem('employeeAdminAgen', JSON.stringify(adminAgenData));
                }
                if (categories.length > 0)
                    localStorage.setItem('employeeDataCats', JSON.stringify(categories));
                if (purposes.length > 0)
                    localStorage.setItem('employeeDataPurps', JSON.stringify(purposes));
                if (sources.length > 0)
                    localStorage.setItem('employeeDataSources', JSON.stringify(sources));

                localStorage.setItem('employData', "true");

                resolve(true);
            })

            promise.then((successMessage) => {
                window.location.assign('./otherTPsInfo.html');
            });
        }

        function adminAgenChecked() {
            var check = document.getElementById('yesExtAdmin');
            var name = document.getElementById('agencyName');
            var tin = document.getElementById('agencyTIN');
            var address = document.getElementById('agencyAddress');
            var desc = document.getElementById('agencyDesc')


            if (check.checked) {
                name.required = true;
                tin.required = true;
                address.required = true;
                desc.required = true;
            } else {
                name.required = false;
                tin.required = false;
                address.required = false;
                desc.required = false;
            }
        }
    </script>

</body>

</html>